{% extends 'base.html' %}
{% load static %}
{% block content %}

<body class=" ">
    <div class="wrapper">
        {% include 'includes/navbar.html' %}
        <div class="content">
          
            <header class="hero-section">
                <img data-speed=".6" class="hero" src="{% static 'images/bg1.jpg' %}" alt="Alt" />
                <div class="container">
                  <div data-speed=".75" class="main-header">
                    <div class="main-box">
                      <span data-i18n="allSpan"> All In </span>
                    <h1 class="main-title" data-i18n="all">
                      One <br />Group
        
                    </h1>
                    <span class="logo-name"> Sadeq </span>
                    </div>
                  </div>
                </div>
              </header>
                
            <div class="portfolio">
                
              </div>
                <div class="container">
                <main class="gallery blog">
                    <h2 data-i18n="blogT">Blog</h2>
                    <div data-speed=".9" class="gallery__left">
                        <!-- Form  -->
                        <div class="form">
                            
                            <select id = "category" name="category">
                              <option value="" disabled selected data-i18n="fbCategory">Filter By Category</option>
                              <optgroup label="ARCHITECTURE">
                                  {% for category in categories %}
                                  {% if category.type == '1' %}
                                    <option value="{{ category.id }}">{{ category.name }}</option>
                                  {% endif %}
                                  {% endfor %}
                              </optgroup>
                              <optgroup label="ADVERTISING">
                                  {% for category in categories %}
                                  {% if category.type == '2' %}
                                    <option value="{{ category.id }}">{{ category.name }}</option>
                                  {% endif %}
                                  {% endfor %}
                              </optgroup>
                              
                            </select>
                            <button onclick="fetchPictures()" data-i18n="search">Search</button>
                        </div>
                      <div class="gallery__item">
                   <div class="cards-con">
                       {% for post in posts %}
                       <div class="blog-card  ">
                        <div class="tag" {% if post.category.type == '2' %} data-type="adver" {% else %} data-type="arch" {% endif %}>
                            {{ post.category.name }}</div>
                        <figure class="card__thumb">
                            <img src="{{ post.post_image.url }}" alt="Picture by David Monje" class="card__image">
                            <figcaption class="card__caption">
                                <h2 class="card__title">{{ post.title }}</h2>
                                <p class="card__snippet">{{ post.subtitle }}</p>
                                <p class="card__snippet">{{ post.created_at|date:"d/m/Y"  }}</p>
                                <a href="{% url 'core:blogDetails' post.id %}" class="card__button">Read more</a>
                            </figcaption>
                        </figure>
                    </div>
                       {% endfor %}
                    <div class="blog-card  ">
                        <div class="tag" data-type="arch">Interior Design</div>
                        <figure class="card__thumb">
                            <img src="https://source.unsplash.com/71u2fOofI-U/300x510" alt="Picture by Nathan Dumlao" class="card__image">
                            <figcaption class="card__caption">
                                <h2 class="card__title">This Is Your Body And Brain On Coffee</h2>
                                <p class="card__snippet">Drinking more caffeine during the coronavirus lockdown? Here's how it can affect you over time and advice on making it better for you.</p>
                                <a href="" class="card__button">Read more</a>
                            </figcaption>
                        </figure>
                    </div>

                        <!-- Card -->
                   </div>
                </div>
                </main>
                <div class="stack">
                    <li><i class="fa-solid fa-chevron-left"></i></li>
                    <li class="active">1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                    <li><i class="fa-solid fa-chevron-right"></i></li>
                </div>
                </div>
            </div>
            <footer class="footer">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="footer-bg">
                    <path fill="#212121" fill-opacity="1"
                        d="M0,128L48,138.7C96,149,192,171,288,170.7C384,171,480,149,576,149.3C672,149,768,171,864,160C960,149,1056,107,1152,90.7C1248,75,1344,85,1392,90.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
                    </path>
                </svg>
                <div class="social-overlap process-scetion">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-md-10">
                                <div class="social-bar">
                                    <div class="social-icons iconpad text-center">
                                        <a class="slider-nav-item"
                                            href="https://www.facebook.com/profile.php?id=100093971528108"
                                            target="_blank"><i class="fab fa-facebook"></i></a>
                                        <a class="slider-nav-item" href="mailto:hello@sadeqgroup.com"><i
                                                class="fas fa-envelope"></i></a>
                                        <a class="slider-nav-item" href="tel:201095272427" target="_blank"><i
                                                class="fa-solid fa-phone"></i></a>
                                        <a class="slider-nav-item"
                                            href="https://api.whatsapp.com/send?phone=971545612622" target="_blank"><i
                                                class="fab fa-whatsapp"></i></a>

                                        <a href="https://www.instagram.com/sadeqarchitecture/" target="_blank"
                                            class="slider-nav-item"><i class="fab fa-instagram"></i></a>

                                        <a target="_blank" class="slider-nav-item"
                                            href="https://www.tiktok.com/@sadeqarchitecture?_t=8dWuJ2alkrl&_r=1"><i
                                                class="fab fa-tiktok"></i></a>

                                        <a href="https://twitter.com/sadeqarchitectu?s=11" target="_blank"
                                            class="slider-nav-item"><i class="fab fa-twitter"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <p data-i18n="footer">All rights reserved by Sadeq Group Â© 2023</p>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script>
        function fetchPictures() {
            var category = $('#category').val();        
            $.ajax({
                url: "{% url 'core:get_posts' %}",
                type: 'GET',
                data: {
                    category: category
                },
        success: function (data) {
            var cardsContainer = $('.cards-con');
            cardsContainer.empty();
            console.log(data.length)
            for (var i = 0; i < data.length; i++) {
                var post_data = data[i];
                console.log(post_data)
                var cardHtml = `
                    <div class="blog-card">
                        <div class="tag" data-type="${post_data.category_type}">
                            ${post_data.category_name}
                        </div>
                        <figure class="card__thumb">
                            <img src="${post_data.image_url}" alt="Picture by David Monje" class="card__image">
                            <figcaption class="card__caption">
                                <h2 class="card__title">${post_data.title}</h2>
                                <p class="card__snippet">${post_data.subtitle}</p>
                                <p class="card__snippet">${post_data.created_at}</p>
                                <a href="${post_data.details_url}" class="card__button">Read more</a>
                            </figcaption>
                        </figure>
                    </div>
                `;
        
            console.log(cardHtml) // Append the HTML to the cardsHtml string
            }
        },
                error: function () {
                    // Handle the error case
                    console.error('Error fetching pictures.');
                }
            });
        }
        
        </script>

</body>
{% endblock %}